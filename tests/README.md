# 测试策略说明

本目录包含 libco-oop 协程库的所有测试代码。

## 测试目录结构

### unit/
单元测试，包含：
- 各个组件的独立功能测试
- 使用 Google Test 框架
- 测试覆盖率要求 > 90%

### integration/
集成测试，包含：
- 多组件协作的功能测试
- 端到端的场景测试
- 真实使用场景模拟

### benchmark/
性能基准测试，包含：
- 使用 Google Benchmark 框架
- 性能回归检测
- 与 libco/libaco 的性能对比

## 运行测试

```bash
# 运行所有单元测试
xmake run unit_tests

# 运行特定测试
xmake run unit_tests --filter=Context*

# 运行性能基准测试
xmake run benchmark_tests

# 运行集成测试
xmake run integration_tests
```

## 测试规范

### 单元测试
- 每个类都要有对应的测试文件
- 测试文件命名：`test_[类名].cpp`
- 测试用例命名：`[类名][功能描述]`
- 包含正常流程、边界条件、错误处理测试

### 集成测试
- 测试多个组件的协作
- 模拟真实的使用场景
- 验证系统的端到端功能

### 性能测试
- 关键路径的性能基准
- 内存使用情况监控
- 性能回归检测

## 测试数据

测试中使用的数据应该：
- 具有代表性
- 覆盖边界条件
- 易于理解和维护

## 持续集成

所有测试都应该：
- 在CI环境中自动运行
- 测试失败时阻止合并
- 提供清晰的失败信息 